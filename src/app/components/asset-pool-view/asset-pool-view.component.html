<div class="main-content">
  <div class="container-fluid">

    <button class="btn btn-simple" (click)="goBack()">
      <i class="material-icons">keyboard_return</i>Back
    </button>
    <div class="row">
      <div style="cursor: pointer" class="col-lg-12" >
        <div class="card card-stats" >
          <div class="card-header" data-background-color="green">
            <i class="material-icons">store</i>
          </div>
          <div class="card-content">
            <p class="category">Currency Name</p>
            <h5 class="title">{{pool?.issuerName}}.{{pool?.currency}}</h5>


            <div class="row">
              <div class="col-xs-12" style="margin-top: 40px;">

                <ol class="breadcrumb text-left">
                  <li><a href="javascript:void (0)">{{pool?.category?.level1}}</a></li>
                  <li><a href="javascript:void (0)">{{pool?.category?.level2}}</a></li>
                  <li> <a href="javascript:void (0)">{{pool?.category?.level3}}</a></li>
                  <li> <a href="javascript:void (0)">{{pool?.category?.level4}}</a></li>
                  <li> <a href="javascript:void (0)">{{pool?.category?.level5}}</a></li>

                </ol>
              </div>
            </div>



            <div class="row">
              <div class="col-lg-6">


                <div class="row" style="text-align: left">
                  <hr>

                  <div class="col-xs-6 text-left">
                    <b>Status</b>
                  </div>
                  <div class="col-xs-6 text-right" *ngIf="pool?.blockchain">
                    <b [style.color]="getColor(pool?.blockchain?.approved)">{{pool?.blockchain?.approved===0?'Pending':'Approved'}}</b>
                  </div>
                </div>
                <div class="row" style="text-align: left">
                  <hr>

                  <div class="col-xs-6 text-left">
                    <b>Maximum Quantity</b>


                  </div>
                  <div class="col-xs-6 text-right">
                    <span class="text-gray">{{pool?.maximum}}</span>
                  </div>
                </div>

                <div class="row" style="text-align: left">
                  <hr>

                  <div class="col-xs-6 text-left">
                    <b>EstimateUnit</b>


                  </div>
                  <div class="col-xs-6 text-right">
                    <span class="text-gray">{{pool?.estimateUnit}}</span>
                  </div>
                </div>


                <div class="row" style="text-align: left">
                  <hr>

                  <div class="col-xs-6 text-left">
                    <b>Unlock condition</b>


                  </div>
                  <div class="col-xs-6 text-right" >
                    <span class="text-gray">{{pool?.blockchain?.unlockCondition}}</span>
                  </div>
                </div>

              </div>
              <div class="col-lg-6" >



                <div class="row" style="text-align: left">
                  <hr>

                  <div class="col-xs-6 text-left">
                    <b>EstimatePrice</b>


                  </div>
                  <div class="col-xs-6 text-right">
                    <span class="text-gray">{{pool?.estimatePrice}}</span>
                  </div>
                </div>






                <div class="row" style="text-align: left">
                <hr>

                <div class="col-xs-6 text-left">
                  <b>Chain Asset?</b>


                </div>
                <div class="col-xs-6 text-right" >
                  <span class="text-gray">{{pool?.chainOrNot===true?'Yes':'No'}}</span>
                </div>
              </div>


                <div class="row" style="text-align: left">
                  <hr>

                  <div class="col-xs-6 text-left">
                    <b>Number of assets</b>


                  </div>
                  <div class="col-xs-6 text-right" >
                    <span class="text-gray">{{pool?.assetsId?.length}}</span>
                  </div>

                </div>


                <div class="row" style="text-align: left">
                  <hr>

                  <div class="col-xs-6 text-left">
                    <b>Estimate Price</b>


                  </div>
                  <div class="col-xs-6 text-right" >
                    <span class="text-gray">{{pool?.estimatePrice}}</span>
                  </div>

                </div>


              </div>

            </div>

            <div class="row" style="text-align: left">
              <hr>

              <div class="col-xs-12 text-center">
                <h5><b>Description</b></h5>
                <p class="text-gray">{{pool?.desc}}</p>

              </div>


            </div>

            <div class="row" style="text-align: center">

              <div class="col-xs-12">
                <hr>

                <button [disabled]="!pool.blockchain || pool.blockchain?.approved===0 " (click)="openModal(template,pool)" class="btn btn-success ">I want to Issue Token</button>

              </div>

            </div>

            <div class="row" style="text-align: center">

              <div class="col-xs-12">

                <h3>Asset Evidences</h3>
                <section *ngIf="assetEvidenceHttpStatus==='pending' || assetPoolHttpSstatus==='rejected' ">
                  <app-spinner [type]="'bounce'" *ngIf="assetEvidenceHttpStatus==='pending'"></app-spinner>

                  <app-error-show *ngIf="assetEvidenceHttpStatus==='rejected'" [error]="'Assets evidences could not be fetched.Try again!'">

                  </app-error-show>
                </section>

                  <div class="row" *ngIf="assetEvidenceHttpStatus==='resolved'">
                    <div class="col-xs-12 col-md-6" *ngFor="let asset of pool.assets;let i=index" >
                      <h4 class="text-gray text-center">Asset {{i+1}}</h4>
                      <h4 class="text-center" *ngIf="asset.evidences && !asset.evidences.length">No evidences found</h4>
                      <carousel *ngIf="asset.evidences && asset.evidences.length">
                        <slide *ngFor="let evidence of asset.evidences" style="height:350px;">
                          <img [src]="evidence.url" alt="First slide" style="display: block; width: 100%;">
                          <div class="carousel-caption d-none d-md-block">
                            <h3>{{asset?.name}}</h3>
                            <p>{{asset?.user?.name}}</p>
                            <p>{{evidence?.date|moment}}</p>
                            <p>{{evidence?.hash}}</p>

                            <button class="btn btn-primary" *ngIf="evidence && evidence.status==='rejected'">Rejected</button>

                            <button class="btn btn-primary" *ngIf="evidence && evidence.status==='approved'">Approved</button>

                            <button class="btn btn-primary" *ngIf="evidence && evidence.status==='pending'">Pending</button>
                          </div>
                        </slide>

                      </carousel>
                    </div>
                  </div>




              </div>


            </div>



          </div>




        </div>
      </div>
    </div>
  </div>


  <ng-template #template>
    <div class="modal-header">
      <h4 class="modal-title pull-left">ISSUE TOKEN</h4>
      <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <form name="loginForm">
        <div class="row">
          <div class="col-md-6">
            <div class="form-group">
              <label class="control-label" style="font-size: 14px;">Maximum Quantity</label>
              <input [disabled]="true" type="text" [(ngModel)]="pool.maximum" name="maximum" class="form-control" >
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group">
              <label class="control-label" style="font-size: 14px;">Currency</label>
              <input [disabled]="true" type="text" [(ngModel)]="pool.blockchain.currency" name="currency" class="form-control" >
            </div>
          </div>

        </div>



        <div class="row">
          <div class="col-md-6">
            <div class="form-group">
              <label class="control-label" style="font-size: 14px;">Issue Number</label>
              <input type="text"  [(ngModel)]="token.amount"  name="amount" class="form-control" >
            </div>
          </div>

          <div class="col-md-6">
            <div class="form-group">
              <label class="control-label" style="font-size: 14px;">Exchange rate</label>
              <input type="text"  [(ngModel)]="token.exchangeRate"  name="exchangeRate" class="form-control" >
            </div>
          </div>

        </div>


        <button
                [disabled]="issueTokenHttpStatus==='pending'"
                type="submit"
                (click)="issueToken(selectedPool)"
                class="btn btn-danger pull-right">SUBMIT</button>
        <div class="clearfix"></div>
      </form>

    </div>
  </ng-template>

</div>
